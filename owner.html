<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YUDZ API'S MANAGER</title>
<style>
:root {
  --primary-color: #6c5ce7;
  --secondary-color: #a29bfe;
  --accent-color: #00cec9;
  --background-color: #f4f6ff;
  --card-background: #ffffff;
  --text-color: #2c3e50;
  --text-muted: #7f8c8d;
  --border-color: rgba(0,0,0,0.1);
  --highlight-color: rgba(108,92,231,0.1);
  --shadow: 0 8px 20px rgba(0,0,0,0.08);
  --hover-shadow: 0 12px 30px rgba(0,0,0,0.12);
  --border-radius: 12px;
  --border-radius-lg: 20px;
  --transition: all 0.3s cubic-bezier(0.25,0.8,0.25,1);
  --hover-transform: translateY(-4px);
  --space-sm: 12px;
  --space-md: 18px;
  --space-lg: 28px;
  --space-xl: 36px;
}

* {
  box-sizing: border-box;
}

body {
  font-family: "Outfit", sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding: var(--space-xl) 1rem;
  margin: 0;
}

#apiKeyManager {
  width: 100%;
  max-width: 480px;
  background: var(--card-background);
  border-radius: var(--border-radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow);
  text-align: center;
  animation: fadeIn 0.6s ease forwards;
}

h1 {
  font-size: 2rem;
  font-weight: 900;
  background: linear-gradient(135deg,var(--primary-color),var(--accent-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: var(--space-lg);
}

#apiKeyManager label {
  display: block;
  font-weight: 600;
  margin-bottom: var(--space-sm);
  font-size: 0.95rem;
  text-align: left;
}

#apiKeyManager input,
#apiKeyManager select {
  width: 100%;
  max-width: 100%;
  padding: 0.7rem 1rem;
  margin-bottom: var(--space-md);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  font-size: 1rem;
  transition: var(--transition);
  text-align: left;
  background: linear-gradient(145deg,#f0f2ff,#fff);
  cursor: pointer;
}

#apiKeyManager input:focus,
#apiKeyManager select:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px var(--highlight-color);
  outline: none;
  transform: translateY(-1px);
}

#apiKeyManager button {
  width: 100%;
  padding: 0.75rem;
  border: none;
  border-radius: var(--border-radius);
  background: linear-gradient(135deg,var(--primary-color),var(--secondary-color));
  color: #fff;
  font-weight: 700;
  font-size: 1.05rem;
  cursor: pointer;
  transition: var(--transition);
  box-shadow: 0 6px 16px rgba(108,92,231,0.25);
}

#apiKeyManager button:hover {
  transform: var(--hover-transform);
  box-shadow: var(--hover-shadow);
}

#apiKeyManager pre {
  background: #f0f2ff;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: var(--space-md);
  font-size: 0.95rem;
  color: var(--text-muted);
  max-height: 280px;
  overflow-y: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.04);
  text-align: left;
}

#newKeyWrapper,
#resetOptionWrapper,
#limitWrapper,
#expireWrapper {
  display: none;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px);}
  to { opacity: 1; transform: translateY(0);}
}

/* Mobile friendly adjustments */
@media (max-width: 600px) {
  #apiKeyManager {
    padding: var(--space-md);
  }
  h1 {
    font-size: 1.8rem;
  }
  #apiKeyManager input,
  #apiKeyManager select,
  #apiKeyManager button {
    font-size: 0.95rem;
  }
}
</style>
</head>
<body>
<div id="apiKeyManager">
  <h1>YUDZ API'S MANAGER</h1>

  <label>Admin Key:</label>
  <input type="text" id="adminKey" placeholder="Masukkan API key admin">

  <label>Action:</label>
  <select id="action">
    <optgroup label="API Keys">
      <option value="addapikey">Tambah Apikey</option>
      <option value="delapikey">Hapus Apikey</option>
      <option value="editapikey">Edit Apikey</option>
      <option value="checkapikey">Check Apikey</option>
      <option value="changeapikey">Custom Apikey</option>
      <option value="getapikey">Get Apikey Info</option>
    </optgroup>
    <optgroup label="User Management">
      <option value="register">Register User</option>
      <option value="login">Login User</option>
      <option value="edituser">Edit User</option>
      <option value="getuserinfo">Get User Info</option>
      <option value="deleteuser">Delete User</option>
    </optgroup>
    <optgroup label="Maintenance">
      <option value="updatecollection">Update Collection Docs</option>
    </optgroup>
  </select>

  <div id="targetKeyWrapper">
    <label>API Key:</label>
    <input type="text" id="targetKey" placeholder="Masukkan target API key">
  </div>

  <div id="newKeyWrapper">
    <label>New API Key:</label>
    <input type="text" id="newKey" placeholder="Masukkan key baru">
  </div>

  <div id="limitWrapper">
    <label>Limit:</label>
    <input type="number" id="limit" placeholder="Limit API key baru / edit">
  </div>

  <div id="expireWrapper">
    <label>Expire Days:</label>
    <input type="number" id="expireDays" placeholder="Expire dalam hari">
  </div>

  <div id="resetOptionWrapper">
    <label>Reset Keys:</label>
    <select id="resetOption">
      <option value="true">Yes</option>
      <option value="false">No</option>
    </select>
  </div>

  <div id="usernameWrapper">
    <label>Username:</label>
    <input type="text" id="username" placeholder="Username">
  </div>

  <div id="passwordWrapper">
    <label>Password:</label>
    <input type="password" id="password" placeholder="Password">
  </div>

  <div id="emailWrapper">
    <label>Email:</label>
    <input type="email" id="email" placeholder="Email">
  </div>

  <button id="submitBtn">Submit</button>

  <h3>Response:</h3>
  <pre id="response">Menunggu aksi...</pre>
</div>

<script>
const actionSelect = document.getElementById("action");
const responseEl = document.getElementById("response");

const wrappers = {
  targetKeyWrapper: document.getElementById("targetKeyWrapper"),
  newKeyWrapper: document.getElementById("newKeyWrapper"),
  limitWrapper: document.getElementById("limitWrapper"),
  expireWrapper: document.getElementById("expireWrapper"),
  resetOptionWrapper: document.getElementById("resetOptionWrapper"),
  usernameWrapper: document.getElementById("usernameWrapper"),
  passwordWrapper: document.getElementById("passwordWrapper"),
  emailWrapper: document.getElementById("emailWrapper")
};

const updateFormVisibility = () => {
  const action = actionSelect.value;
  Object.values(wrappers).forEach(el => el.style.display = "none");

  if(["addapikey","delapikey","editapikey","checkapikey","changeapikey","getapikey"].includes(action)){
    wrappers.targetKeyWrapper.style.display = "block";
  }
  if(action==="changeapikey"){
    wrappers.newKeyWrapper.style.display = "block";
  }
  if(["addapikey","editapikey"].includes(action)){
    wrappers.limitWrapper.style.display = "block";
    wrappers.expireWrapper.style.display = "block";
  }
  if(action==="addapikey"){
    wrappers.resetOptionWrapper.style.display = "block";
  }
  if(["register","login","edituser"].includes(action)){
    wrappers.usernameWrapper.style.display = "block";
    wrappers.passwordWrapper.style.display = "block";
  }
  if(["register","edituser"].includes(action)){
    wrappers.emailWrapper.style.display = "block";
  }
};
actionSelect.addEventListener("change", updateFormVisibility);
updateFormVisibility();

document.getElementById("submitBtn").addEventListener("click", async ()=>{
  const adminKey = document.getElementById("adminKey").value.trim();
  const action = actionSelect.value;
  const params = new URLSearchParams();

  const key = document.getElementById("targetKey").value.trim();
  const newKey = document.getElementById("newKey").value.trim();
  const limit = document.getElementById("limit").value;
  const expireDays = document.getElementById("expireDays").value;
  const reset = document.getElementById("resetOption").value;
  const username = document.getElementById("username").value.trim();
  const password = document.getElementById("password").value.trim();
  const email = document.getElementById("email").value.trim();

  if(key) params.append("key", key);
  if(newKey) params.append("newkey", newKey);
  if(limit) params.append("limit", limit);
  if(expireDays) params.append("expireDays", expireDays);
  if(action==="addapikey") params.append("reset", reset);
  if(username) params.append("username", username);
  if(password) params.append("password", password);
  if(email) params.append("email", email);

  let url = `https://api.yydz.biz.id/api/user/${action}?${params.toString()}`;

  try {
    const res = await fetch(url, { method:"GET", headers: {"x-apikey": adminKey} });
    const data = await res.json();
    responseEl.textContent = JSON.stringify(data, null, 2);
  } catch(err) {
    responseEl.textContent = "Error: " + err.message;
  }
});
</script>
</body>
</html>
