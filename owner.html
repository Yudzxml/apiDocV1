<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>YUDZ API'S MANAGER</title>
<style>
:root {
  --primary-color: #6c5ce7;
  --secondary-color: #a29bfe;
  --accent-color: #00cec9;
  --background-color: #f4f6ff;
  --card-background: #ffffff;
  --text-color: #2c3e50;
  --text-muted: #7f8c8d;
  --border-color: rgba(0,0,0,0.1);
  --highlight-color: rgba(108,92,231,0.1);
  --shadow: 0 8px 20px rgba(0,0,0,0.08);
  --hover-shadow: 0 12px 30px rgba(0,0,0,0.12);
  --border-radius: 12px;
  --border-radius-lg: 20px;
  --transition: all 0.3s cubic-bezier(0.25,0.8,0.25,1);
  --hover-transform: translateY(-4px);
  --space-sm: 12px;
  --space-md: 18px;
  --space-lg: 28px;
  --space-xl: 36px;
}

* {
  box-sizing: border-box;
}

body {
  font-family: "Outfit", sans-serif;
  background-color: var(--background-color);
  color: var(--text-color);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding: var(--space-xl) 1rem;
  margin: 0;
}

#apiKeyManager {
  width: 100%;
  max-width: 480px;
  background: var(--card-background);
  border-radius: var(--border-radius-lg);
  padding: var(--space-lg);
  box-shadow: var(--shadow);
  text-align: center;
  animation: fadeIn 0.6s ease forwards;
}

h1 {
  font-size: 2rem;
  font-weight: 900;
  background: linear-gradient(135deg,var(--primary-color),var(--accent-color));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: var(--space-lg);
}

#apiKeyManager label {
  display: block;
  font-weight: 600;
  margin-bottom: var(--space-sm);
  font-size: 0.95rem;
  text-align: left;
}

#apiKeyManager input,
#apiKeyManager select {
  width: 100%;
  max-width: 100%;
  padding: 0.7rem 1rem;
  margin-bottom: var(--space-md);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  font-size: 1rem;
  transition: var(--transition);
  text-align: left;
  background: linear-gradient(145deg,#f0f2ff,#fff);
  cursor: pointer;
}

#apiKeyManager input:focus,
#apiKeyManager select:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px var(--highlight-color);
  outline: none;
  transform: translateY(-1px);
}

#apiKeyManager button {
  width: 100%;
  padding: 0.75rem;
  border: none;
  border-radius: var(--border-radius);
  background: linear-gradient(135deg,var(--primary-color),var(--secondary-color));
  color: #fff;
  font-weight: 700;
  font-size: 1.05rem;
  cursor: pointer;
  transition: var(--transition);
  box-shadow: 0 6px 16px rgba(108,92,231,0.25);
}

#apiKeyManager button:hover {
  transform: var(--hover-transform);
  box-shadow: var(--hover-shadow);
}

#apiKeyManager pre {
  background: #f0f2ff;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: var(--space-md);
  font-size: 0.95rem;
  color: var(--text-muted);
  max-height: 280px;
  overflow-y: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
  box-shadow: inset 0 2px 6px rgba(0,0,0,0.04);
  text-align: left;
}

#newKeyWrapper,
#resetOptionWrapper,
#limitWrapper,
#expireWrapper {
  display: none;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px);}
  to { opacity: 1; transform: translateY(0);}
}

/* Mobile friendly adjustments */
@media (max-width: 600px) {
  #apiKeyManager {
    padding: var(--space-md);
  }
  h1 {
    font-size: 1.8rem;
  }
  #apiKeyManager input,
  #apiKeyManager select,
  #apiKeyManager button {
    font-size: 0.95rem;
  }
}
</style>
</head>
<body>

<div id="apiKeyManager">
  <h1>YUDZ API'S MANAGER</h1>

  <label>adminKeys:</label>
  <input type="text" id="adminKey" placeholder="Masukkan API key admin">

  <label>Action</label>
  <select id="action">
    <option value="addapikey">Tambah Apikeys</option>
    <option value="delapikey">Hapus Apikeys</option>
    <option value="editapikey">Edit Apikeys</option>
    <option value="checkapikey">Check Apikeys</option>
    <option value="changeapikey">Custom Apikeys</option>
  </select>

  <div id="resetOptionWrapper">
    <label>resetKeys:</label>
    <select id="resetOption">
      <option value="true">Yes</option>
      <option value="false">No</option>
    </select>
  </div>

  <div id="targetKeyWrapper">
    <label>apiKeys:</label>
    <input type="text" id="targetKey" placeholder="Masukkan target API key">
  </div>

  <div id="newKeyWrapper">
    <label>newKey:</label>
    <input type="text" id="newKey" placeholder="Masukkan key baru">
  </div>

  <div id="limitWrapper">
    <label>Limit:</label>
    <input type="number" id="limit" placeholder="Limit API key baru / edit">
  </div>

  <div id="expireWrapper">
    <label>expireDays:</label>
    <input type="number" id="expireDays" placeholder="Expire dalam hari">
  </div>

  <button id="submitBtn">Submit</button>

  <h3>Response:</h3>
  <pre id="response">Menunggu aksi...</pre>
</div>

<script>
const actionSelect = document.getElementById("action");
const limitWrapper = document.getElementById("limitWrapper");
const expireWrapper = document.getElementById("expireWrapper");
const newKeyWrapper = document.getElementById("newKeyWrapper");
const resetOptionWrapper = document.getElementById("resetOptionWrapper");
const submitBtn = document.getElementById("submitBtn");
const responseEl = document.getElementById("response");

const updateFormVisibility = () => {
  const action = actionSelect.value;
  limitWrapper.style.display = (action==="addapikey" || action==="editapikey") ? "block" : "none";
  expireWrapper.style.display = (action==="addapikey" || action==="editapikey") ? "block" : "none";
  newKeyWrapper.style.display = (action==="changeapikey") ? "block" : "none";
  resetOptionWrapper.style.display = (action==="addapikey") ? "block" : "none";
};

actionSelect.addEventListener("change", updateFormVisibility);
updateFormVisibility();

submitBtn.addEventListener("click", async ()=>{
  const adminKey = document.getElementById("adminKey").value.trim();
  const action = actionSelect.value;
  const targetKey = document.getElementById("targetKey").value.trim();
  const newKey = document.getElementById("newKey").value.trim();
  const limit = document.getElementById("limit").value;
  const expireDays = document.getElementById("expireDays").value;
  const reset = document.getElementById("resetOption")?.value || "true";

  if(!targetKey){
    responseEl.textContent = "Error: Target API Key wajib diisi";
    return;
  }
  if(action==="changeapikey" && !newKey){
    responseEl.textContent = "Error: New API Key wajib diisi untuk action change";
    return;
  }

  let url = `https://api.yydz.biz.id/api/user/${action}?key=${encodeURIComponent(targetKey)}`;
  if(action==="changeapikey") url += `&newkey=${encodeURIComponent(newKey)}`;
  if(limit) url += `&limit=${limit}`;
  if(expireDays) url += `&expireDays=${expireDays}`;
  if(action==="addapikey") url += `&reset=${reset}`;

  try {
    const res = await fetch(url, { method:"GET", headers: {"x-apikey": adminKey} });
    const data = await res.json();
    responseEl.textContent = JSON.stringify(data, null, 2);
  } catch(err) {
    responseEl.textContent = "Error: " + err.message;
  }
});
</script>

</body>
</html>
